{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"E:/Project/NextJS/dscwebsite/dsc-website/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/Project/NextJS/dscwebsite/dsc-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { Input, Avatar } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nimport searchMembers from '../../../helpers/searchMembers';\nimport ImageUrl from '../../../constants/imageUrl';\nimport styles from '../../../styles/SearchBar.module.scss';\nimport 'antd/es/input/style/index.css';\nimport 'antd/es/avatar/style/index.css';\nexport default function SearchBar() {\n  var _useState = useState(''),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var _useState2 = useState([]),\n      members = _useState2[0],\n      setMembers = _useState2[1];\n\n  var _useState3 = useState(false),\n      isSearching = _useState3[0],\n      setIsSearching = _useState3[1];\n\n  var inputRef = useRef();\n\n  var search = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var filteredMembers;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return searchMembers(data);\n\n            case 2:\n              filteredMembers = _context.sent;\n              setMembers(filteredMembers);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function search(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      if (value === inputRef.current.state.value) {\n        search(value);\n      }\n    }, 500);\n    return function () {\n      clearTimeout(timer);\n    };\n  }, [inputRef, value]);\n\n  var _onChange = function onChange(e) {\n    var val = e.target.value;\n    setValue(val);\n  };\n\n  var disableDropdown = function disableDropdown() {\n    setTimeout(function () {\n      return setIsSearching(false);\n    }, 200);\n  };\n\n  var enableDropdown = function enableDropdown() {\n    setIsSearching(true);\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.single,\n    children: [/*#__PURE__*/_jsx(Input, {\n      className: styles.input,\n      ref: inputRef,\n      size: \"large\",\n      placeholder: \"Search\",\n      prefix: /*#__PURE__*/_jsx(SearchOutlined, {}),\n      onFocus: enableDropdown,\n      onBlur: disableDropdown,\n      onChange: function onChange(e) {\n        return _onChange(e);\n      }\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: isSearching ? styles.dropdown : styles.dropdown_invisible,\n      children: members.map(function (member) {\n        return /*#__PURE__*/_jsx(Link, {\n          href: \"/members/\".concat(member.id),\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            href: \"/members/\".concat(member.id),\n            className: styles.dropdown_item,\n            children: [/*#__PURE__*/_jsx(Avatar, {\n              className: styles.avatar,\n              src: /*#__PURE__*/_jsx(Image, {\n                className: \"search-avatar\",\n                src: \"\".concat(ImageUrl.IMAGE_AVATAR_URL, \"/\").concat(member.avatar),\n                width: 60,\n                height: 90,\n                layout: \"intrinsic\"\n              })\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.name,\n              children: member.name\n            })]\n          })\n        }, member.id);\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}