{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { Input, Avatar } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nimport searchMembers from '../../../helpers/searchMembers';\nimport ImageUrl from '../../../constants/imageUrl';\nimport styles from '../../../styles/SearchBar.module.scss';\nimport 'antd/es/input/style/index.css';\nimport 'antd/es/avatar/style/index.css';\nexport default function SearchBar() {\n  const {\n    0: value,\n    1: setValue\n  } = useState('');\n  const {\n    0: members,\n    1: setMembers\n  } = useState([]);\n  const {\n    0: isSearching,\n    1: setIsSearching\n  } = useState(false);\n  const inputRef = useRef();\n\n  const search = async data => {\n    const filteredMembers = await searchMembers(data);\n    setMembers(filteredMembers);\n  };\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (value === inputRef.current.state.value) {\n        search(value);\n      }\n    }, 500);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [inputRef, value]);\n\n  const onChange = e => {\n    const val = e.target.value;\n    setValue(val);\n  };\n\n  const disableDropdown = () => {\n    setTimeout(() => setIsSearching(false), 200);\n  };\n\n  const enableDropdown = () => {\n    setIsSearching(true);\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.single,\n    children: [/*#__PURE__*/_jsx(Input, {\n      className: styles.input,\n      ref: inputRef,\n      size: \"large\",\n      placeholder: \"Search\",\n      prefix: /*#__PURE__*/_jsx(SearchOutlined, {}),\n      onFocus: enableDropdown,\n      onBlur: disableDropdown,\n      onChange: e => onChange(e)\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: isSearching ? styles.dropdown : styles.dropdown_invisible,\n      children: members.map(member => /*#__PURE__*/_jsx(Link, {\n        href: `/members/${member.id}`,\n        children: /*#__PURE__*/_jsxs(\"a\", {\n          href: `/members/${member.id}`,\n          className: styles.dropdown_item,\n          children: [/*#__PURE__*/_jsx(Avatar, {\n            className: styles.avatar,\n            src: /*#__PURE__*/_jsx(Image, {\n              className: \"search-avatar\",\n              src: `${ImageUrl.IMAGE_AVATAR_URL}/${member.avatar}`,\n              width: 60,\n              height: 90,\n              layout: \"intrinsic\"\n            })\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.name,\n            children: member.name\n          })]\n        })\n      }, member.id))\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}